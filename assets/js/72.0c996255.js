(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{377:function(e,t,o){"use strict";o.r(t);var r=o(0),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("p",[e._v("ä¸ºæ–¹ä¾¿æŸ¥é˜…ï¼Œè½¬è½½ä¸€ç¯‡å…³äº HTTP è·¨åŸŸè¯·æ±‚çš„æ–‡ç« ã€‚\n"),e._v("\nåŸä½œå‡ºå¤„ï¼š"),o("a",{attrs:{href:"https://blog.serenader.me/http-cors-in-javascript/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://blog.serenader.me/http-cors-in-javascript/"),o("OutboundLink")],1)]),e._v(" "),o("h2",{attrs:{id:"å‰åº"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#å‰åº"}},[e._v("#")]),e._v(" å‰åº")]),e._v(" "),o("p",[o("em",[e._v("è‡ªä»æˆ‘æ¥è§¦å‰ç«¯ä»¥æ¥ï¼Œæ¥æ‰‹çš„é¡¹ç›®é‡Œé¢å¾ˆå¤§éƒ¨åˆ†éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œåç«¯åªæä¾›æ¥å£ï¼Œå‰ç«¯æ ¹æ®åç«¯æ¥å£æ¸²æŸ“å‡ºå®é™…é¡µé¢ã€‚ä¸ªäººè§‰å¾—è¿™æ˜¯ä¸€ä¸ªæŒºå¥½çš„æ¨¡å¼ï¼Œå‰åç«¯å„è‡ªè´Ÿè´£å„è‡ªçš„æ¨¡å—ï¼Œåˆ†å·¥æ˜ç¡®ï¼Œè€Œä¸”ä¹Ÿç»™å‰ç«¯æ›´å¤§çš„å‘æŒ¥ç©ºé—´ã€‚")])]),e._v(" "),o("p",[o("em",[e._v("ä¸ä»¥å‰å¥—æ¨¡æ¿çš„æ¨¡å¼ä¸åŒï¼Œå‰åç«¯åˆ†ç¦»ä»¥åï¼Œå‰ç«¯è·Ÿåç«¯çš„æ²Ÿé€šç»å¤§éƒ¨åˆ†éƒ½æ˜¯é€šè¿‡å‰ç«¯ä¸»åŠ¨å‘åç«¯å‘èµ·è¯·æ±‚æ¥å®Œæˆçš„ã€‚è€Œå‰ç«¯çš„è¯·æ±‚åˆç»å¤§éƒ¨åˆ†æ˜¯ç”± Ajax æ„æˆçš„ï¼ŒAjax æ˜¯ä¸€ç§éå¸¸æ–¹ä¾¿çš„è·å–æ•°æ®çš„æ–¹å¼ã€‚ä½†æ˜¯ï¼Œä¸€æ—¦ Ajax ç¢°ä¸Šè·¨åŸŸï¼Œé‚£ä¹ˆé—®é¢˜å°±ä¼šéº»çƒ¦å¾ˆå¤šã€‚è¿™ç¯‡æ–‡ç« ä¸»è¦æ¢³ç†äº†æˆ‘åœ¨é¡¹ç›®å¼€å‘é‡Œé¢ç¢°åˆ°çš„ä¸€äº›å…³äºè·¨åŸŸè¯·æ±‚çš„é—®é¢˜ï¼Œå½“ç„¶ä¹Ÿä¼šæœ‰ä¸€äº›å…³äºè·¨åŸŸè¯·æ±‚çš„ä¸€äº›èƒŒæ™¯çŸ¥è¯†ã€‚PSï¼šæ–‡æœ«æœ‰ä¸ªå°å½©è›‹å“¦ğŸ˜„")])]),e._v(" "),o("p",[e._v("ä¸¥æ ¼æ¥è¯´ï¼Œè·¨åŸŸè¯·æ±‚å¹¶ä¸ä»…ä»…åªæ˜¯ Ajax çš„è·¨åŸŸè¯·æ±‚ï¼Œè€Œæ˜¯å¯¹äºä¸€ä¸ªé¡µé¢æ¥è¯´ï¼Œåªè¦å®ƒè¯·æ±‚äº†å…¶ä»–åŸŸåçš„èµ„æºäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±å±äºè·¨åŸŸè¯·æ±‚äº†ã€‚æ¯”å¦‚ï¼Œä¸€ä¸ªå¸¦æœ‰å…¶ä»–åŸŸåçš„ "),o("code",[e._v("src")]),e._v(" çš„ "),o("code",[e._v("<img>")]),e._v(" æ ‡ç­¾ï¼Œä»¥åŠé¡µé¢ä¸­å¼•å…¥çš„å…¶ä»–ç¬¬ä¸‰æ–¹çš„ CSS æ ·å¼ç­‰ã€‚")]),e._v(" "),o("p",[e._v("å¯¹äº img ä»¥åŠ CSS è€Œè¨€ï¼Œè·¨åŸŸè¯·æ±‚æœ¬èº«å¹¶æ²¡æœ‰æ›´å¤šçš„å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºè¿™äº›è¯·æ±‚éƒ½å±äºåªè¯»è¯·æ±‚ï¼Œå¹¶ä¸ä¼šå¯¹æºèµ„æºé€ æˆå‰¯ä½œç”¨ã€‚è€Œå¦‚æœè·¨åŸŸè¯·æ±‚æ˜¯ä»è„šæœ¬é‡Œé¢å‘å‡ºå»çš„ï¼Œç”±äºè„šæœ¬å…·æœ‰é«˜åº¦çµæ´»æ€§ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¼šæ ¹æ®åŒæºç­–ç•¥æ¥é™åˆ¶å®ƒçš„åŠŸèƒ½ï¼Œä½¿å¾—æ­£å¸¸æƒ…å†µä¸‹ï¼Œè„šæœ¬åªèƒ½è¯·æ±‚åŒæºçš„èµ„æºã€‚å¦‚æœé¡µé¢ç¡®å®éœ€è¦é€šè¿‡è„šæœ¬è¯·æ±‚å…¶ä»–ç½‘ç«™çš„èµ„æºï¼Œé‚£ä¹ˆå°±åº”å½“åœ¨è·¨åŸŸèµ„æºå…±äº«ï¼ˆCORSï¼‰çš„æœºåˆ¶ä¸‹å·¥ä½œã€‚")]),e._v(" "),o("p",[e._v("ç­‰ç­‰åŒå­¦ï¼Œä»€ä¹ˆå«åšåŒæºç­–ç•¥ï¼Ÿ")]),e._v(" "),o("h2",{attrs:{id:"åŒæºç­–ç•¥ï¼ˆsame-origin-policyï¼‰"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºç­–ç•¥ï¼ˆsame-origin-policyï¼‰"}},[e._v("#")]),e._v(" åŒæºç­–ç•¥ï¼ˆSame-origin policyï¼‰")]),e._v(" "),o("p",[e._v("å¯¹äºä¸¤ä¸ªé¡µé¢ï¼ˆèµ„æºï¼‰è€Œè¨€ï¼Œåªè¦ä»–ä»¬æ»¡è¶³ä»¥ä¸‹ä¸‰ä¸ªæ¡ä»¶åˆ™ç§°ä»–ä»¬ç¬¦åˆåŒæºç­–ç•¥ï¼š")]),e._v(" "),o("ol",[o("li",[e._v("åè®®ç›¸åŒ")]),e._v(" "),o("li",[e._v("ç«¯å£ç›¸åŒ")]),e._v(" "),o("li",[e._v("åŸŸåç›¸åŒ")])]),e._v(" "),o("p",[e._v("å¦å¤–ï¼Œ"),o("code",[e._v("about:blank")]),e._v(" å’Œ "),o("code",[e._v("javascript:")]),e._v(" ç»§æ‰¿åŠ è½½è¿™äº›èµ„æºçš„é¡µé¢çš„ originã€‚"),o("code",[e._v("data:")]),e._v(" çš„èµ„æºä¸åŒï¼Œè‡ªèº«ä¼šæ‹¥æœ‰ä¸€ä¸ªç©ºçš„å®‰å…¨çš„ä¸Šä¸‹æ–‡ã€‚")]),e._v(" "),o("p",[e._v("å¦å¤–ï¼Œå­åŸŸå¯ä»¥é€šè¿‡JS è®¾ç½® "),o("code",[e._v("document.domain")]),e._v(" æ¥é€šè¿‡åŒæºç­–ç•¥ã€‚å¦‚ï¼š")]),e._v(" "),o("p",[e._v("åœ¨å­åŸŸ "),o("code",[e._v("http://a.example.com/test.html")]),e._v(" çš„é¡µé¢ä¸­ï¼Œé€šè¿‡ JS è®¾ç½® "),o("code",[e._v("document.domain='example.com'")]),e._v(" ï¼Œåˆ™å½“å‰é¡µé¢ä¸ "),o("code",[e._v("http://example.com/page.html")]),e._v(" ç¬¦åˆåŒæºç­–ç•¥ã€‚")]),e._v(" "),o("p",[e._v("ç®€å•çš„è¯´ï¼Œå¯¹äºé¡µé¢ "),o("code",[e._v("http://www.example.com/page1.html")]),e._v(" æ¥è¯´ï¼Œä»¥ä¸‹é¡µé¢ä¸å®ƒéƒ½ä¸ç¬¦åˆåŒæºç­–ç•¥ï¼Œè„šæœ¬æ— æ³•ç›´æ¥è¯·æ±‚è¿™äº›èµ„æºï¼š")]),e._v(" "),o("ul",[o("li",[o("code",[e._v("https://www.example.com/page1.html")]),e._v(" : åè®®ä¸åŒ")]),e._v(" "),o("li",[o("code",[e._v("http://www.example.com:81/page1.html")]),e._v(" : ç«¯å£ä¸åŒ")]),e._v(" "),o("li",[o("code",[e._v("http://another.example.com/page1.html")]),e._v(" : åŸŸåä¸åŒ")])]),e._v(" "),o("p",[e._v("é‚£ä¹ˆï¼Œä»€ä¹ˆåˆæ˜¯ CORS å‘¢ï¼Ÿ")]),e._v(" "),o("h2",{attrs:{id:"corsï¼ˆcross-origin-resource-sharingï¼‰"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#corsï¼ˆcross-origin-resource-sharingï¼‰"}},[e._v("#")]),e._v(" CORSï¼ˆCross-Origin Resource Sharingï¼‰")]),e._v(" "),o("p",[e._v("CORS æœ¬è´¨ä¸Šæ˜¯è§„å®šäº†ä¸€ç³»åˆ—çš„ HTTP å¤´æ¥ä½œä¸ºåˆ¤æ–­è„šæœ¬æ˜¯å¦èƒ½å¤Ÿå®ç°è·¨åŸŸè¯·æ±‚ã€‚åœ¨äº†è§£è¿™äº›è¯·æ±‚å¤´ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹è·¨åŸŸè¯·æ±‚æœ‰å“ªäº›ç±»å‹ã€‚")]),e._v(" "),o("blockquote",[o("p",[e._v("é€šè¿‡è„šæœ¬æ¥å‘å‡ºè¯·æ±‚æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡åˆ›å»º XMLHttpRequest çš„æ–¹å¼æ¥å‘å‡ºè¯·æ±‚ï¼Œå¦å¤–ä¸€ç§æ˜¯é€šè¿‡ fetch API æ¥å®ç°è¯·æ±‚ã€‚")])]),e._v(" "),o("p",[e._v("ä¸€èˆ¬æ¥è¯´ï¼Œè·¨åŸŸè¯·æ±‚å¯ä»¥å¤§è‡´åˆ†ä¸ºä¸¤ç§ï¼Œå…¶ä¸­ä¸€ç§ç§°ä¹‹ä¸ºç®€å•çš„è¯·æ±‚ï¼Œå…¶ç¬¦åˆä»¥ä¸‹æ¡ä»¶ï¼š")]),e._v(" "),o("ul",[o("li",[e._v("è¯·æ±‚çš„æ–¹æ³•æ˜¯ "),o("code",[e._v("GET")]),e._v("ã€ "),o("code",[e._v("POST")]),e._v("ã€ "),o("code",[e._v("HEAD")]),e._v(" å…¶ä¸­ä¹‹ä¸€ã€‚")]),e._v(" "),o("li",[e._v("é™¤äº†æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Šçš„è¯·æ±‚å¤´ï¼ˆå¦‚ "),o("code",[e._v("Connection")]),e._v(" \\ "),o("code",[e._v("User-Agent")]),e._v(" ç­‰ï¼‰ä¹‹å¤–ï¼Œåªå…è®¸ä¸‹é¢å‡ ç§è¯·æ±‚å¤´ï¼š\n"),o("ul",[o("li",[o("code",[e._v("Accept")])]),e._v(" "),o("li",[o("code",[e._v("Accept-Language")])]),e._v(" "),o("li",[o("code",[e._v("Content-Language")])]),e._v(" "),o("li",[o("code",[e._v("Content-Type")])])])]),e._v(" "),o("li",[o("code",[e._v("Content-Type")]),e._v(" è¯·æ±‚å¤´çš„å€¼åªèƒ½æ˜¯ "),o("code",[e._v("application/x-www-form-urlencoded")]),e._v("ã€ "),o("code",[e._v("multipart/form-data")]),e._v("ã€ "),o("code",[e._v("text/plain")]),e._v(" å…¶ä¸­ä¹‹ä¸€ã€‚")])]),e._v(" "),o("p",[e._v("åä¹‹ï¼Œå¦‚æœæœ‰è¿èƒŒä¸Šé¢ä¸‰æ¡è§„åˆ™ä¸­çš„ä»»æ„ä¸€æ¡ï¼Œé‚£ä¹ˆå³ä¸æ˜¯ç®€å•çš„è·¨åŸŸè¯·æ±‚ã€‚éç®€å•çš„è·¨åŸŸè¯·æ±‚ç›¸å¯¹äºç®€å•çš„è·¨åŸŸè¯·æ±‚æ¥è¯´åŒºåˆ«åœ¨äºï¼Œè¯·æ±‚åœ¨å‘å‡ºå»ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘é€ä¸€ä¸ª preflighted è¯·æ±‚ï¼Œç”¨æ¥å‘æœåŠ¡å™¨ç«¯ç¡®è®¤æ¥ä¸‹æ¥è¦è¿›è¡Œçš„è¯·æ±‚æ˜¯å¦æ˜¯è¢«å…è®¸çš„ã€‚")]),e._v(" "),o("h3",{attrs:{id:"preflight-è¯·æ±‚"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#preflight-è¯·æ±‚"}},[e._v("#")]),e._v(" Preflight è¯·æ±‚")]),e._v(" "),o("p",[e._v("åœ¨å®é™…é¡¹ç›®å¼€å‘ä¸­ï¼Œåœ¨ä½¿ç”¨ XHR æˆ–è€… fetch API è¯·æ±‚æ¥å£çš„æ—¶å€™å¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šå¸¦ä¸Šä¸€äº›é¢å¤–çš„ç‰¹æ®Šè¯·æ±‚å¤´ï¼Œæˆ–è€…ä½¿ç”¨ç‰¹æ®Šçš„ HTTP æ–¹æ³•ï¼Œå¦‚ "),o("code",[e._v("PUT")]),e._v("ã€"),o("code",[e._v("DELETE")]),e._v(" ç­‰ï¼ˆå¸¸è§äº Restful æ¥å£ï¼‰ã€‚ç”±äºå¤šäº†é¢å¤–çš„è¯·æ±‚å¤´æˆ–è€…ä½¿ç”¨äº†ç‰¹æ®Šçš„ HTTP æ–¹æ³•ï¼Œæµè§ˆå™¨å°±å°†è¿™äº›è¯·æ±‚è§†ä¸ºéç®€å•çš„è·¨åŸŸè¯·æ±‚ï¼Œå°†ä¼šåœ¨å®é™…è¯·æ±‚å‘å‡ºå»ä¹‹å‰å…ˆè‡ªåŠ¨å‘å‡ºä¸€ä¸ª preflight è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª OPTIONS è¯·æ±‚ã€‚")]),e._v(" "),o("p",[e._v("OPTIONS è¯·æ±‚ä¼šå°†å½“å‰çš„è·¨åŸŸè¯·æ±‚æ‰€ä½¿ç”¨çš„ç‰¹æ®Š HTTP è¯·æ±‚å¤´å’Œ HTTP è¯·æ±‚æ–¹æ³•å‘é€ç»™æœåŠ¡å™¨ç«¯ï¼Œå¦‚ Access-Control-Request-Method å’Œ Access-Control-Request-Headers ã€‚æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ° OPTIONS è¯·æ±‚åè¿”å›ç›¸åº”çš„å“åº”å¤´ã€‚æµè§ˆå™¨æ ¹æ®è¿”å›çš„å“åº”å¤´å†æ¥åˆ¤æ–­è¯¥è·¨åŸŸè¯·æ±‚æ˜¯å¦è¢«å…è®¸çš„ã€‚å½“æµè§ˆå™¨åˆ¤å®š OPTIONS è¯·æ±‚é€šè¿‡äº†ï¼ŒçœŸæ­£çš„è¯·æ±‚æ‰ä¼šå‘å‡ºã€‚å¦‚ä»¥ä¸‹åˆ™æ˜¯ä¸€ä¸ªå¸¦æœ‰ OPTIONS è¯·æ±‚ä»¥åŠçœŸæ­£çš„ GET è¯·æ±‚çš„å“åº”å¤´å’Œè¯·æ±‚å¤´ï¼š")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("OPTIONS /api4 HTTP/1.1\nHost: us1.serenader.me:3333\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\nAccess-Control-Request-Method: PUT\nOrigin: http://us1.serenader.me:3334\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36\nAccept: */*\nReferer: http://us1.serenader.me:3334/\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: zh-CN,zh;q=0.8,en;q=0.6,zh-TW;q=0.4,fr;q=0.2\n")])])]),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('HTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nAccess-Control-Allow-Methods: GET,POST,PUT,DELETE\nContent-Type: text/html; charset=utf-8\nContent-Length: 2\nETag: W/"2-REvLOj/Pg4kpbElGfyfh1g"\nDate: Thu, 19 Jan 2017 15:21:15 GMT\nConnection: keep-alive\nPUT /api4 HTTP/1.1\nHost: us1.serenader.me:3333\nConnection: keep-alive\nContent-Length: 0\nPragma: no-cache\nCache-Control: no-cache\nOrigin: http://us1.serenader.me:3334\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36\nAccept: */*\nReferer: http://us1.serenader.me:3334/\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: zh-CN,zh;q=0.8,en;q=0.6,zh-TW;q=0.4,fr;q=0.2\n')])])]),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('HTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: text/html; charset=utf-8\nContent-Length: 2\nETag: W/"2-REvLOj/Pg4kpbElGfyfh1g"\nDate: Thu, 19 Jan 2017 15:21:15 GMT\nConnection: keep-alive\n')])])]),o("p",[e._v("äº†è§£äº†ç®€å•è·¨åŸŸè¯·æ±‚ä»¥åŠä¼šå‘å‡º "),o("code",[e._v("preflight")]),e._v(" è¯·æ±‚çš„éç®€å•è·¨åŸŸè¯·æ±‚ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ç©¶ç«Ÿæ˜¯å“ªäº› HTTP å¤´åœ¨å†³å®šè¿™äº›è·¨åŸŸè¯·æ±‚çš„ã€Œå®¿å‘½ã€ã€‚")]),e._v(" "),o("blockquote",[o("p",[e._v("ä¸ºäº†å¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£è¿™äº› HTTP å¤´çš„ä½œç”¨ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ demo ï¼Œå¼€æºåœ¨äº† GitHub ä¸Šï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥åˆ° "),o("a",{attrs:{href:"https://github.com/serenader2014/http-cors-demo",target:"_blank",rel:"noopener noreferrer"}},[e._v("è¿™ä¸ªé“¾æ¥æŸ¥çœ‹ä»£ç "),o("OutboundLink")],1),e._v("ï¼Œæˆ–è€…è®¿é—®è¿™ä¸ªåœ¨çº¿ demo é¢„è§ˆæ•ˆæœï¼š"),o("a",{attrs:{href:"http://us1.serenader.me:3334/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://us1.serenader.me:3334/"),o("OutboundLink")],1),e._v("ã€‚è®°å¾—åŠ è½½å®Œé¡µé¢åæ‰“å¼€ Chrome çš„æ§åˆ¶å°æ¥æŸ¥çœ‹è¯¦ç»†çš„è¯·æ±‚ä¿¡æ¯ã€‚")])]),e._v(" "),o("h3",{attrs:{id:"access-control-allow-origin"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#access-control-allow-origin"}},[e._v("#")]),e._v(" Access-Control-Allow-Origin")]),e._v(" "),o("p",[o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" æ˜¯ä¸€ä¸ªå“åº”å¤´ï¼Œå®ƒæŒ‡å®šäº†å½“å‰èµ„æºå…è®¸è¢«å“ªäº›åŸŸåçš„è„šæœ¬æ‰€è¯·æ±‚åˆ°ã€‚")]),e._v(" "),o("p",[e._v("è·¨åŸŸè¯·æ±‚ï¼ˆæ— è®ºç®€å•è¯·æ±‚è¿˜æ˜¯éç®€å•è¯·æ±‚ï¼‰åœ¨å‘å‡ºæ—¶éƒ½ä¼šå¸¦ä¸Š Origin è¯·æ±‚å¤´ï¼Œç”¨æ¥è¡¨æ˜å½“å‰å‘å‡ºè¯·æ±‚çš„æ˜¯å“ªä¸€ä¸ªåŸŸåã€‚æ­¤æ—¶æœåŠ¡å™¨ç«¯çš„å“åº”å¤´é‡Œé¢å¿…é¡»åŒ…å«ä¸€ä¸ª Access-Control-Allow-Origin å¹¶ä¸”è¯¥å€¼åŒ¹é… Origin è¯·æ±‚å¤´ï¼Œè¿™æ—¶å€™è¯¥è·¨åŸŸè¯·æ±‚æ‰æœ‰å¯èƒ½æˆåŠŸã€‚å¦åˆ™ä¸€å¾‹å¤±è´¥ã€‚")]),e._v(" "),o("p",[o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" æ˜¯ç¬¬ä¸€é“é—¨æ§›ã€‚å…¶å€¼çš„åŒ¹é…è§„åˆ™æ˜¯ï¼š")]),e._v(" "),o("p",[e._v("å¦‚æœå…¶å€¼æ˜¯é€šé…ç¬¦ "),o("code",[e._v("*")]),e._v(" çš„è¯ï¼Œåˆ™å…è®¸æ‰€æœ‰çš„åŸŸåè¿›è¡Œè·¨åŸŸè¯·æ±‚\nå¦‚æœå…¶å€¼æ˜¯æŒ‡å®šçš„æŸä¸ªå›ºå®šåŸŸåï¼Œé‚£ä¹ˆåªå…è®¸è¯¥åŸŸåè¿›è¡Œè·¨åŸŸè¯·æ±‚ï¼Œå…¶ä»–åŸŸåå°†ä¼šå¤±è´¥\nå¦‚æœå…¶å€¼æ˜¯å¸¦æœ‰é€šé…ç¬¦çš„åŸŸåï¼Œå¦‚ "),o("code",[e._v("*.example.com")]),e._v(" ï¼Œé‚£ä¹ˆåˆ™å…è®¸è¯¥åŸŸåä»¥åŠè¯¥åŸŸåçš„å­åŸŸåè¿›è¡Œè·¨åŸŸã€‚\nå…·ä½“å¯ä»¥è§‚çœ‹ demoï¼Œ"),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no0",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-0"),o("OutboundLink")],1),e._v(" å±•ç¤ºäº†å½“è„šæœ¬è¯·æ±‚æ²¡æœ‰é…ç½®è·¨åŸŸå¤´çš„æ¥å£æ—¶ï¼Œè¯·æ±‚è¢«æµè§ˆå™¨æ‹¦æˆªäº†çš„æƒ…å†µï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors01.jpg")}}),e._v(" "),o("p",[o("a",{attrs:{href:"http://us1.serenader.me:3334/#no1",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-1"),o("OutboundLink")],1),e._v(" åˆ™å±•ç¤ºäº†æ¥å£æœ‰é…ç½® Access-Control-Allow-Origin å“åº”å¤´ï¼Œä½†æ˜¯å¹¶éè„šæœ¬è¯·æ±‚çš„åŸŸåï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šæŠ¥è¿™ç§é”™ï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors02.jpg")}}),e._v(" "),o("p",[e._v("åªæœ‰é…ç½®äº†æ­£ç¡®çš„ Access-Control-Allow-Origin å“åº”å¤´è¯·æ±‚æ‰èƒ½å¤Ÿæ­£å¸¸æ¥æ”¶åˆ°å“åº”ï¼Œå¦‚ "),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no2",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-2"),o("OutboundLink")],1),e._v("ï¼Œæ­¤æ—¶çš„è¯·æ±‚å¤´å’Œå“åº”å¤´ä¸ºï¼š")]),e._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v("GET /api2 HTTP/1.1\nHost: us1.serenader.me:3333\nConnection: keep-alive\nPragma: no-cache\nCache-Control: no-cache\nOrigin: http://us1.serenader.me:3334\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_2) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/55.0.2883.95 Safari/537.36\nAccept: */*\nReferer: http://us1.serenader.me:3334/\nAccept-Encoding: gzip, deflate, sdch\nAccept-Language: zh-CN,zh;q=0.8,en;q=0.6,zh-TW;q=0.4,fr;q=0.2\n")])])]),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[e._v('HTTP/1.1 200 OK\nX-Powered-By: Express\nAccess-Control-Allow-Origin: *\nContent-Type: text/html; charset=utf-8\nContent-Length: 2\nETag: W/"2-REvLOj/Pg4kpbElGfyfh1g"\nDate: Thu, 19 Jan 2017 15:03:33 GMT\nConnection: keep-alive\n')])])]),o("p",[e._v("å¯¹äºç®€å•çš„è·¨åŸŸè¯·æ±‚æ¥è¯´ï¼Œé€šå¸¸åªéœ€è¦é€šè¿‡ "),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" è¿™ä¸ªå“åº”å¤´åˆ™å¯ä»¥è¯·æ±‚æˆåŠŸï¼ˆå¸¦ cookie ç­‰æƒ…å†µå…ˆä¸è€ƒè™‘ï¼Œä¼šåœ¨ä¸‹é¢è®¨è®ºï¼‰ã€‚è€Œå½“è¯·æ±‚ä¸æ˜¯ç®€å•çš„è·¨åŸŸè¯·æ±‚ï¼Œæƒ…å†µå°±æ¯”è¾ƒå¤æ‚ã€‚")]),e._v(" "),o("h3",{attrs:{id:"access-control-allow-headers"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#access-control-allow-headers"}},[e._v("#")]),e._v(" Access-Control-Allow-Headers")]),e._v(" "),o("p",[o("code",[e._v("Access-Control-Allow-Headers")]),e._v(" æ˜¯ç”¨æ¥å‘Šè¯‰æµè§ˆå™¨å½“å‰æ¥å£æ‰€å…è®¸å¸¦ä¸Šçš„ç‰¹æ®Šè¯·æ±‚å¤´æ˜¯å“ªäº›ã€‚è¿™ä¸ª HTTP å¤´ä¸€èˆ¬ä¼šå‡ºç°åœ¨ OPTIONS è¯·æ±‚çš„å“åº”å¤´ä¸­ã€‚")]),e._v(" "),o("p",[e._v("å½“è¯·æ±‚è®¾ç½®äº†ä¸€ä¸ªç‰¹æ®Šçš„è¯·æ±‚å¤´è€Œä¸”æ‰€è¯·æ±‚çš„æ¥å£å¹¶æ²¡æœ‰é…ç½® "),o("code",[e._v("Access-Control-Allow-Headers")]),e._v(" å“åº”å¤´æ—¶ï¼Œä¼šæŠ¥å¦‚ä¸‹é”™è¯¯ï¼Œå¦‚ "),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no3",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-3"),o("OutboundLink")],1),e._v(" æ‰€ç¤ºï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors03.jpg")}}),e._v(" "),o("p",[e._v("ä¸Šé¢çš„æˆªå›¾å±•ç¤ºäº†è¯·æ±‚é™„å¸¦äº†ä¸€ä¸ª "),o("code",[e._v("X-Custom-Header")]),e._v(" çš„è¯·æ±‚å¤´ï¼Œä½†æ˜¯è¯·æ±‚åœ¨ preflight é˜¶æ®µå°±å¤±è´¥äº†ï¼Œå¦‚æœè¦è®©è¯·æ±‚æˆåŠŸå®Œæˆçš„è¯ï¼Œåˆ™å¿…é¡»åœ¨ OPTIONS è¯·æ±‚çš„å“åº”é‡Œé¢é…ä¸Š "),o("code",[e._v("Access-Control-Allow-Headers: X-Custom-Header")]),e._v("ã€‚")]),e._v(" "),o("h3",{attrs:{id:"access-control-allow-methods"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#access-control-allow-methods"}},[e._v("#")]),e._v(" Access-Control-Allow-Methods")]),e._v(" "),o("p",[e._v("ä¸ä¸Šä¸€ä¸ª HTTP å¤´ç›¸ä¼¼ï¼Œ"),o("code",[e._v("Access-Control-Allow-Methods")]),e._v(" å‘Šè¯‰æµè§ˆå™¨å½“å‰æ¥å£å…è®¸ä½¿ç”¨å“ªäº› HTTP æ–¹æ³•å»è¯·æ±‚å®ƒã€‚è¿™ä¸ª HTTP å¤´é€šå¸¸ä¹Ÿæ˜¯åœ¨ OPTIONS è¯·æ±‚çš„å“åº”å¤´ä¸­æ‰æœ‰æ„ä¹‰ã€‚å½“æ²¡æœ‰é€šè¿‡è¿™ä¸ªå“åº”å¤´æ—¶ï¼Œä¼šæŠ¥è¿™æ ·çš„é”™è¯¯ï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors04.jpg")}}),e._v(" "),o("p",[e._v("åŒæ ·çš„ï¼Œä¸Šé¢çš„æˆªå›¾åœ¨ preflight é˜¶æ®µå°±å¤±è´¥äº†ã€‚å¦‚æœè¦è®©è¯·æ±‚æˆåŠŸæ‰§è¡Œçš„è¯ï¼Œé‚£ä¹ˆéœ€è¦é…ç½®å“åº”å¤´ä¸ºï¼š"),o("code",[e._v("Access-Control-Allow-Methods: GET,POST,PUT")]),e._v("ã€‚")]),e._v(" "),o("h3",{attrs:{id:"access-control-max-age"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#access-control-max-age"}},[e._v("#")]),e._v(" Access-Control-Max-Age")]),e._v(" "),o("p",[e._v("ç”±äº OPTIONS è¯·æ±‚çš„å­˜åœ¨ï¼Œå¯¹äºä¸€ä¸ªéç®€å•è¯·æ±‚æ¥è¯´ï¼Œå®é™…å‘å‡ºå»çš„è¯·æ±‚ä¼šæœ‰ä¸¤ä¸ªã€‚è¿™å¤šå¤šå°‘å°‘ä¼šæµªè´¹å¸¦å®½ï¼Œæ¯•ç«Ÿè¿™ä¸ªæ ¡éªŒåº”è¯¥åªä¼šåœ¨ç¬¬ä¸€æ¬¡å‘ç”Ÿè€Œå·²ï¼Œä¸€æ—¦é€šè¿‡æ ¡éªŒï¼Œåœ¨æ¥ä¸‹æ¥çš„ä¸€æ®µæ—¶é—´é‡Œï¼Œå†æ¬¡è¯·æ±‚è¯¥æ¥å£çš„è¯ï¼Œé‚£ä¹ˆå®é™…ä¸Š OPTIONS è¯·æ±‚åˆ™æ²¡æœ‰å¿…è¦å†å‘å‡ºã€‚")]),e._v(" "),o("p",[e._v("å¥½åœ¨ï¼Œæœ‰ä¸ªå«åš "),o("code",[e._v("Access-Control-Max-Age")]),e._v(" çš„å“åº”å¤´å¯ä»¥å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚è¿™ä¸ªå“åº”å¤´æŒ‡å®šäº†è¯·æ±‚ä¸€æ—¦é€šè¿‡äº† preflight è¯·æ±‚ä¹‹åï¼Œä¼šåœ¨å¤šé•¿æ—¶é—´å†…æ— é¡»å†æ¬¡è§¦å‘ preflight è¯·æ±‚ã€‚ä»è€Œè¾¾åˆ°å‡å°‘å®é™…è¯·æ±‚ï¼Œå‡å°‘å¸¦å®½æµªè´¹çš„é—®é¢˜ã€‚")]),e._v(" "),o("h3",{attrs:{id:"access-control-allow-credentials"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#access-control-allow-credentials"}},[e._v("#")]),e._v(" Access-Control-Allow-Credentials")]),e._v(" "),o("p",[e._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œ ä»»ä½•è·¨åŸŸè¯·æ±‚éƒ½ä¸ä¼šå¸¦ä¸Šä»»ä½•èº«ä»½å‡­è¯çš„ï¼Œè¿™äº›èº«ä»½å‡­è¯åŒ…æ‹¬ï¼š")]),e._v(" "),o("ul",[o("li",[e._v("cookie")]),e._v(" "),o("li",[e._v("ä¸èº«ä»½è®¤è¯ç›¸å…³çš„è¯·æ±‚")]),e._v(" "),o("li",[e._v("TLS å®¢æˆ·ç«¯è¯ä¹¦")])]),e._v(" "),o("p",[e._v("ç„¶è€Œï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦è¯·æ±‚å¸¦ä¸Š cookie ï¼Œé‚£ä¹ˆåˆ™éœ€è¦å¼€å¯è·¨åŸŸè¯·æ±‚çš„ "),o("code",[e._v("withCredentials")]),e._v(" é€‰é¡¹ã€‚")]),e._v(" "),o("p",[e._v("æƒ³è¦æ‰‹åŠ¨å¼€å¯ä¼ è¾“ cookie çš„è¯ï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•ï¼›")]),e._v(" "),o("ul",[o("li",[e._v("XHRï¼šä¸º XHRå¯¹è±¡è®¾ç½® xhr.withCredentials = true ã€‚")]),e._v(" "),o("li",[e._v("fetch: ä¼ å…¥çš„å‚æ•°é€‰é¡¹é‡Œé¢å¼€å¯ credentials fetch(url, { credentials: 'include' })")])]),e._v(" "),o("p",[e._v("å¼€å¯äº† "),o("code",[e._v("withCredentials")]),e._v(" ä¹‹åï¼Œè¯·æ±‚åœ¨å‘å‡ºå»çš„æ—¶å€™å°±ä¼šé»˜è®¤åŠ ä¸Š Cookieã€‚")]),e._v(" "),o("p",[e._v("ç„¶è€Œï¼Œé™¤äº†éœ€è¦åœ¨å‰ç«¯ä¸­æ‰‹åŠ¨å¼€å¯ withCredentials ä¹‹å¤–ï¼ŒæœåŠ¡å™¨ç«¯ä¹Ÿéœ€è¦æœ‰ç›¸åº”å“åº”å¤´æ”¯æŒï¼Œè¯·æ±‚æ‰ä¼šæˆåŠŸã€‚")]),e._v(" "),o("p",[o("code",[e._v("Access-Control-Allow-Credentials")]),e._v(" è¿™ä¸ªå“åº”å¤´åˆ™æ˜¯è¡¨æ˜äº†å½“å‰è¯·æ±‚çš„èµ„æºæ˜¯å¦å…è®¸é™„å¸¦èº«ä»½å‡­è¯ã€‚å½“å…¶å€¼ä¸º true æ—¶è¯·æ±‚æ‰æˆåŠŸï¼Œå¦åˆ™ä¼šå¤±è´¥ï¼Œå¤±è´¥å†…å®¹å¦‚ä¸‹ï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors05.jpg")}}),e._v(" "),o("p",[e._v("å¯ä»¥å‚è€ƒ demo-7è§‚çœ‹è¯·æ±‚å¤´ä»¥åŠå“åº”å¤´ã€‚")]),e._v(" "),o("p",[e._v("å¦å¤–ï¼Œ**ä¸€æ—¦å¼€å¯äº† "),o("code",[e._v("withCredentials")]),e._v(" é€‰é¡¹ï¼ŒæœåŠ¡å™¨ç«¯çš„ "),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" å“åº”å¤´å°±ä¸èƒ½æ˜¯é€šé…ç¬¦ï¼Œåªèƒ½æ˜¯å›ºå®šçš„ä¸€ä¸ªåŸŸåï¼Œå¦åˆ™ä¼šè¯·æ±‚å¤±è´¥ã€‚**å…·ä½“é”™è¯¯å†…å®¹ä¸ºï¼š")]),e._v(" "),o("img",{attrs:{src:e.$withBase("/img/webfe/cors/cors06.jpg")}}),e._v(" "),o("p",[o("a",{attrs:{href:"http://us1.serenader.me:3334/#no8",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-8"),o("OutboundLink")],1),e._v(" å’Œ "),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no9",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-9"),o("OutboundLink")],1),e._v(" åˆ†åˆ«æ¼”ç¤ºäº†å½“è¯·æ±‚å¸¦ä¸Š cookie æ—¶ï¼Œå“åº”å¤´é…ç½®ä¸ºé€šé…ç¬¦çš„æƒ…å†µä»¥åŠå“åº”å¤´æœ‰æ­£ç¡®é…ç½®ä¸ºå…·ä½“åŸŸåçš„æƒ…å†µã€‚")]),e._v(" "),o("h2",{attrs:{id:"æ€»ç»“"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[e._v("#")]),e._v(" æ€»ç»“")]),e._v(" "),o("p",[e._v("æ€»çš„æ¥è¯´ï¼Œå½“åœ¨è„šæœ¬é‡Œé¢å‘å‡ºè¯·æ±‚æ—¶ï¼Œä¼šæœ‰ä»¥ä¸‹æƒ…å†µï¼š")]),e._v(" "),o("ol",[o("li",[e._v("æ‰€è¯·æ±‚èµ„æºçš„åè®®ã€ç«¯å£æˆ–è€…åŸŸåå¦‚æœä¸å½“å‰å‘å‡ºè¯·æ±‚çš„é¡µé¢åœ°å€ä¸€è‡´ï¼Œé‚£ä¹ˆåˆ™ç¬¦åˆåŒæºç­–ç•¥ï¼Œè¯·æ±‚å¯ä»¥è¢«æ­£å¸¸å‘å‡ºã€‚åä¹‹ï¼Œåˆ™ç§°ä¸ºè·¨åŸŸè¯·æ±‚ï¼Œéœ€è¦éµå®ˆ CORS æœºåˆ¶ã€‚")]),e._v(" "),o("li",[e._v("æ‰€æœ‰è·¨åŸŸè¯·æ±‚é‡Œé¢ï¼ŒæœåŠ¡å™¨ç«¯å¿…é¡»è¿”å› "),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" å“åº”å¤´ï¼Œå¹¶ä¸”å…¶å€¼ä¸è¯·æ±‚ä¸­çš„ Origin è¯·æ±‚å¤´çš„å€¼ç›¸åŒ¹é…ã€‚æ­¤æ—¶è¯·æ±‚æ‰å¯ä»¥è¢«å…è®¸ï¼Œå¦åˆ™è¯·æ±‚å°†ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªæ‰ã€‚")]),e._v(" "),o("li",[e._v("è·¨åŸŸè¯·æ±‚åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§æ˜¯ç®€å•è·¨åŸŸè¯·æ±‚ï¼Œå¦å¤–ä¸€ç§æ˜¯éç®€å•è·¨åŸŸè¯·æ±‚ã€‚éç®€å•è·¨åŸŸè¯·æ±‚åœ¨å‘å‡ºè¯·æ±‚ä¹‹å‰ï¼Œæµè§ˆå™¨ä¼šå…ˆå‘å‡ºä¸€ä¸ª preflight è¯·æ±‚ï¼Œå³ä¸€ä¸ª OPTIONS è¯·æ±‚ï¼Œç”¨æ¥éªŒè¯æœåŠ¡å™¨ç«¯æ˜¯å¦å…è®¸è¯¥è¯·æ±‚çš„è®¿é—®ã€‚å½“ OPTIONS è¯·æ±‚æˆåŠŸæ—¶ï¼Œæ‰ä¼šç»§ç»­å‘é€çœŸæ­£çš„è¯·æ±‚ã€‚å¦åˆ™è¯·æ±‚å°†ä¼šåœ¨ OPTIONS é˜¶æ®µä¾¿å¤±è´¥äº†ï¼Œåç»­çœŸæ­£çš„è¯·æ±‚ä¹Ÿä¸ä¼šå‘å‡ºå»ã€‚")]),e._v(" "),o("li",[e._v("å½“è¯·æ±‚å¸¦ä¸Šäº†ç‰¹æ®Šçš„è¯·æ±‚å¤´æ—¶ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›çš„ OPTIONS è¯·æ±‚çš„å“åº”å¿…é¡»åŒ…å« "),o("code",[e._v("Access-Control-Allow-Headers")]),e._v(" å“åº”å¤´ï¼Œå¹¶ä¸”è¯¥å€¼åŒ…å«è¯·æ±‚æ‰€å¸¦ä¸Šçš„ç‰¹æ®Šè¯·æ±‚å¤´çš„åç§°ã€‚è¿™æ—¶å€™è¯·æ±‚æ‰ä¼šæˆåŠŸï¼Œå¦åˆ™ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚")]),e._v(" "),o("li",[e._v("å½“è¯·æ±‚ä½¿ç”¨äº†ç‰¹æ®Šçš„ HTTP æ–¹æ³•ï¼ŒæœåŠ¡å™¨ç«¯è¿”å›çš„ OPTIONS è¯·æ±‚çš„å“åº”å¿…é¡»åŒ…å« "),o("code",[e._v("Access-Control-Allow-Methods")]),e._v(" å“åº”å¤´ï¼Œå¹¶ä¸”è¯¥å€¼åŒ…å«å½“å‰ä½¿ç”¨çš„ HTTP æ–¹æ³•ã€‚å¦‚æœæ²¡æœ‰è¯¥å“åº”å¤´ï¼Œæˆ–è€…å½“å‰ä½¿ç”¨çš„æ–¹æ³•å¹¶ä¸åœ¨å…¶å€¼é‡Œé¢ï¼Œåˆ™è¯·æ±‚ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚")]),e._v(" "),o("li",[e._v("å› ä¸ºéç®€å•è¯·æ±‚æ¯æ¬¡å®Œæ•´è¯·æ±‚ä¸€æ¬¡èµ„æºå®é™…ä¸Šéƒ½ä¼šå‘å‡ºå»ä¸¤ä¸ªè¯·æ±‚ï¼Œä¸ºäº†å‡å°‘ OPTIONS è¯·æ±‚å‘å‡ºçš„æ¬¡æ•°ï¼Œä»¥ä¾¿å‡å°‘å¸¦å®½æµªè´¹ï¼ŒæœåŠ¡å™¨ç«¯å¯ä»¥é…ç½® "),o("code",[e._v("Access-Control-Max-Age")]),e._v(" æ¥æŒ‡å®šæµè§ˆå™¨å¯ä»¥åœ¨å¤šé•¿æ—¶é—´å†…å¯¹ OPTIONS è¯·æ±‚åšç¼“å­˜ï¼Œä½¿å¾—ä¸€æ¬¡è¯·æ±‚æˆåŠŸåï¼Œä¸‹æ¬¡è¯·æ±‚ç›¸åŒçš„æ¥å£æ—¶ä¸ç”¨å†å‘å‡º OPTIONS è¯·æ±‚ã€‚")]),e._v(" "),o("li",[e._v("å½“è·¨åŸŸè¯·æ±‚éœ€è¦å¸¦ä¸Š cookie ç­‰èº«ä»½å‡­è¯æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨å¼€å¯ withCredentials é€‰é¡¹ï¼Œå¹¶ä¸”æœåŠ¡å™¨ç«¯éœ€è¦é…ç½® "),o("code",[e._v("Access-Control-Allow-Credentials")]),e._v(" çš„å“åº”å¤´ï¼Œå¦åˆ™è¯·æ±‚å°†ä¸ä¼šå¸¦ä¸Šä»»ä½•èº«ä»½å‡­è¯ï¼Œæˆ–è€…å½“æ²¡æœ‰ "),o("code",[e._v("Access-Control-Allow-Credentials")]),e._v(" æ—¶è¯·æ±‚ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚")]),e._v(" "),o("li",[e._v("å½“è¯·æ±‚æœ‰å¸¦ä¸Šèº«ä»½å‡­è¯æ—¶ï¼ŒæœåŠ¡å™¨ç«¯é™¤äº†éœ€è¦é…ç½® "),o("code",[e._v("Access-Control-Allow-Credentials")]),e._v(" å“åº”å¤´ä¹‹å¤–ï¼Œ"),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" å“åº”å¤´çš„å€¼ä¸èƒ½æ˜¯é€šé…ç¬¦ï¼Œå¿…é¡»æ˜¯å…·ä½“çš„æŸä¸€ä¸ªåŸŸåã€‚å¦åˆ™ä¼šè¢«æµè§ˆå™¨æ‹¦æˆªã€‚")])]),e._v(" "),o("p",[e._v("åœ¨ä»¥ä¸Š 8 ç‚¹å½“ä¸­ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ç¬¬ 3 ç‚¹å’Œç¬¬ 8 ç‚¹ã€‚")]),e._v(" "),o("p",[e._v("OPTIONS è¯·æ±‚æ˜¯ä¸€ä¸ªæ¯”è¾ƒå®¹æ˜“è¢«äººå¿½ç•¥çš„ä¸€ä¸ªå…³é”®ç‚¹ï¼Œæœ‰ä¸€äº›åç«¯äººå‘˜åœ¨ç¼–å†™æ¥å£çš„æ—¶å€™ï¼Œå¾€å¾€åªçŸ¥é“åœ¨æ¥å£çš„å“åº”å¤´é‡Œé¢å†™å…¥ "),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" ï¼Œè€Œæ²¡æœ‰æ„è¯†åˆ° OPTIONS è¯·æ±‚çš„å­˜åœ¨ã€‚ç‰¹åˆ«æ˜¯ OPTIONS è¯·æ±‚å¹¶ä¸æ˜¯æ¯ä¸ªè·¨åŸŸè¯·æ±‚éƒ½ä¼šå¸¦ä¸Šçš„ï¼Œè¿™å°±å¯¼è‡´äº†æœ‰äº›äººä¼šæœ‰ç–‘é—®ï¼Œä¸ºä»€ä¹ˆæ˜æ˜æˆ‘å‘å‡ºå»çš„æ˜¯ GET è¯·æ±‚ï¼Œç»“æœå´æ˜¯å‘å‡ºå»äº†ä¸€ä¸ª OPTIONS è¯·æ±‚ã€‚è€Œå³ä½¿æœ‰å¯¹ OPTIONS è¯·æ±‚åšè·¨åŸŸå…è®¸çš„è¯ï¼Œé‚£ä¹ˆä¹Ÿå¾ˆå®¹æ˜“å› ä¸ºç¼ºå°‘ç›¸åº”çš„ "),o("code",[e._v("Access-Control-Allow-Headers")]),e._v(" æˆ– "),o("code",[e._v("Access-Control-Allow-Methods")]),e._v(" å“åº”å¤´å¯¼è‡´è¯·æ±‚ä»ç„¶å¤±è´¥ã€‚")]),e._v(" "),o("p",[e._v("ç¬¬ 8 ç‚¹ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å…³é”®ç‚¹ã€‚å¦‚æœä½ æœ‰æ¥å£éœ€è¦å¯¹å¤šä¸ªä¸åŒåŸŸåçš„ç½‘ç«™æä¾›æœåŠ¡çš„è¯ï¼Œé‚£ä¹ˆä½ çš„æ¥å£å°±ä¸èƒ½ä½¿ç”¨ cookie ç­‰èº«ä»½å‡­è¯äº†ï¼Œæ¯•ç«Ÿ "),o("code",[e._v("Access-Control-Allow-Origin")]),e._v(" ä¸èƒ½è®¾ç½®ä¸ºé€šé…ç¬¦ï¼Œé™åˆ¶äº†æ¥å£ä½¿ç”¨çš„å¯¹è±¡ã€‚")]),e._v(" "),o("h2",{attrs:{id:"å½©è›‹æ—¶é—´"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#å½©è›‹æ—¶é—´"}},[e._v("#")]),e._v(" å½©è›‹æ—¶é—´")]),e._v(" "),o("p",[e._v("å‰é¢æåˆ°äº†åªæœ‰éç®€å•è¯·æ±‚æ‰ä¼šè§¦å‘ OPTIONS è¯·æ±‚ï¼Œè€Œæ»¡è¶³ç®€å•è¯·æ±‚ä¹Ÿå°±åªæœ‰é‚£ä¸‰ä¸ªæ¡ä»¶ã€‚ä½†æ˜¯äº‹å®å¹¶ä¸æ˜¯æƒ³è±¡ä¸­çš„é‚£ä¹ˆå®Œç¾ã€‚")]),e._v(" "),o("p",[e._v("å‡å¦‚ä½ ä½¿ç”¨äº† XMLHttpRequest æ¥å®ç°æ–‡ä»¶ä¸Šä¼ çš„è¯ï¼Œå¦‚æœåœ¨ "),o("code",[e._v("xhr.upload")]),e._v(" è¿™ä¸ªå¯¹è±¡é‡Œé¢æ·»åŠ ä»»ä½•äº‹ä»¶ç›‘å¬ï¼Œå°±ä¼šè§¦å‘ OPTIONS è¯·æ±‚ã€‚å³ä½¿æ­¤æ—¶è¯¥è¯·æ±‚æœ¬èº«æ˜¯æ»¡è¶³ç®€å•è¯·æ±‚çš„ä¸‰ä¸ªæ¡ä»¶çš„ã€‚è€Œä¸€æ—¦æŠŠäº‹ä»¶ç›‘å¬å»æ‰å°±æ²¡æœ‰ã€‚å…·ä½“å¯ä»¥å‚è€ƒ "),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no10",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-10"),o("OutboundLink")],1),e._v("ã€"),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no11",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-11"),o("OutboundLink")],1),e._v("ã€"),o("a",{attrs:{href:"http://us1.serenader.me:3334/#no12",target:"_blank",rel:"noopener noreferrer"}},[e._v("demo-12"),o("OutboundLink")],1)]),e._v(" "),o("p",[e._v("è¿™ä¸ªã€Œbugã€æ˜¯æˆ‘å½“åˆåœ¨ç¼–å†™ uploader è¿™ä¸ªåº“æ—¶æ— æ„é—´å‘ç°çš„ï¼Œæˆ‘å½“æ—¶è¿˜ä»¥ä¸ºæ˜¯æµè§ˆå™¨çš„ bug ï¼Œä½†æ˜¯åæ¥åœ¨ Stackoverflow è¿›è¡Œä¸€ç•ªæœç´¢åæ‰å‘ç°ï¼ŒåŸæ¥è¿™æ˜¯æµè§ˆå™¨éšè—çš„ä¸€ä¸ª ã€Œfeatureã€ã€‚ã€‚")]),e._v(" "),o("blockquote",[o("p",[e._v('Turns out this is not a bug. The spec for XMLHttpRequest does mention that upload progress event handlers should cause the "force preflight" flag to be set. I was a bit confused when this was not specifically mentioned in the CORS spec, even though that spec does reference the existence of a "force preflight" flag.')])])])}),[],!1,null,null,null);t.default=n.exports}}]);